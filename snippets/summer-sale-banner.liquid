<!-- Summer Sale Banner Section -->
<div class="banner-container-{{ section.id }}">
  <div class="summer-banner-{{ section.id }}">
    <div class="banner-left-{{ section.id }}">
      <div class="banner-icons-{{ section.id }}">
        {% if block.settings.show_sun_icon %}
          <div class="icon-{{ section.id }} sun-icon-{{ section.id }}">{{ block.settings.sun_icon | default: '‚òÄÔ∏è' }}</div>
        {% endif %}
        {% if block.settings.show_palm_icon %}
          <div class="icon-{{ section.id }} palm-icon-{{ section.id }}">{{ block.settings.palm_icon | default: 'üå¥' }}</div>
        {% endif %}
      </div>
      <div class="banner-content-{{ section.id }}">
        <h2 class="banner-title-{{ section.id }}">{{ block.settings.banner_title | default: 'Kick Off Summer with Big Savings!' }}</h2>
        <p class="banner-subtitle-{{ section.id }}">
          {{ block.settings.banner_subtitle_prefix | default: 'Use code' }}
          <span class="promo-code-{{ section.id }}">{{ block.settings.promo_code | default: 'SUN15' }}</span>
          {{ block.settings.banner_subtitle_suffix | default: 'to enjoy' }}
          <span class="discount-{{ section.id }}">{{ block.settings.discount_text | default: '15% OFF' }}</span>!
        </p>
      </div>
    </div>
   
    <div class="banner-right-{{ section.id }}">
{% if block.settings.show_countdown %}
        <div class="countdown-container-{{ section.id }}">
          <span class="countdown-label-{{ section.id }}">{{ block.settings.countdown_label | default: 'Ends in' }}</span>
          <div class="countdown-timer-{{ section.id }}" id="countdown-{{ section.id }}">
            <span class="time-unit-{{ section.id }}" id="days-{{ section.id }}">00</span>
            <span class="time-separator-{{ section.id }}">d</span>
            <span class="time-unit-{{ section.id }}" id="hours-{{ section.id }}">12</span>
            <span class="time-separator-{{ section.id }}">h</span>
            <span class="time-unit-{{ section.id }}" id="minutes-{{ section.id }}">14</span>
            <span class="time-separator-{{ section.id }}">m</span>
            <span class="time-unit-{{ section.id }}" id="seconds-{{ section.id }}">20</span>
            <span class="time-separator-{{ section.id }}">s</span>
          </div>
        </div>
  {% endif %}
      
      {% if block.settings.show_copy_button %}
        <button class="copy-code-btn-{{ section.id }}" id="copyCodeBtn-{{ section.id }}" data-code="{{ block.settings.promo_code | default: 'SUN15' }}">
          <svg class="copy-icon-{{ section.id }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
          </svg>
          {{ block.settings.copy_button_text | default: 'Copy Code' }}
        </button>
      {% endif %}
    </div>

  </div>
</div>
<!-- ‰∫ßÂìÅÂçñÁÇπÊ®°Âùó -->
<div class="selling_points" style="background:{{ block.settings.bg_color }}; color:{{ block.settings.bg_text }}; padding:24px 16px; border-radius:8px; list-style-position: inside;">
  {{ block.settings.selling_points }}
</div>
<style>
  .selling_points ul li{
        list-style-type: unset !important;
        list-style-position: inside;
  }
  /* Summer Sale Banner Styles - Section {{ section.id }} */
  .banner-container-{{ section.id }} {
    width: 100%;
    max-width: {{ block.settings.max_width | default: 1200 }}px;
    margin: 0 auto;
    padding: 20px 0px;
  }

  .summer-banner-{{ section.id }} {
    background: linear-gradient(135deg, #a7f3d0 0%, #7dd3fc 50%, #bfdbfe 100%);
    border-radius: 16px;
    padding: 15px 15px;
    display: flex;
    gap: 10px;
    align-items: center;
    flex-direction: column;
    justify-content: space-between;
    position: relative;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }

  .banner-left-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 16px;
    flex: 1;
  }

  .banner-icons-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .icon-{{ section.id }} {
    width: {{ block.settings.icon_size | default: 24 }}px;
    height: {{ block.settings.icon_size | default: 24 }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: {{ block.settings.icon_size | default: 24 }}px;
  }

  .sun-icon-{{ section.id }} {
    color: {{ block.settings.sun_icon_color | default: '#f59e0b' }};
  }

  .palm-icon-{{ section.id }} {
    color: {{ block.settings.palm_icon_color | default: '#10b981' }};
  }

  .banner-content-{{ section.id }} {
    flex: 1;
  }

  .banner-title-{{ section.id }} {
    font-size: {{ block.settings.title_font_size | default: 18 }}px;
    font-weight: 700;
    color: {{ block.settings.title_color | default: '#1f2937' }};
    margin-bottom: 4px;
    line-height: 1.3;
    margin: 0 0 4px 0;
  }

  .banner-subtitle-{{ section.id }} {
    font-size: {{ block.settings.subtitle_font_size | default: 14 }}px;
    color: {{ block.settings.subtitle_color | default: '#374151' }};
    font-weight: 500;
    margin: 0;
  }

  .promo-code-{{ section.id }} {
    font-weight: 700;
    color: {{ block.settings.promo_code_color | default: '#1f2937' }};
    background-color: {{ block.settings.promo_code_bg | default: 'rgba(251, 191, 36, 0.3)' }};
    padding: 2px 6px;
    border-radius: 4px;
  }

  .discount-{{ section.id }} {
    font-weight: 700;
    color: {{ block.settings.discount_color | default: '#dc2626' }};
  }

  .banner-right-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .countdown-container-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .countdown-label-{{ section.id }} {
    font-size: {{ block.settings.countdown_label_size | default: 14 }}px;
    color: {{ block.settings.countdown_label_color | default: '#374151' }};
    font-weight: 500;
  }

  .countdown-timer-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .time-unit-{{ section.id }} {
    background-color: {{ block.settings.time_unit_bg | default: 'rgba(251, 191, 36, 0.9)' }};
    color: {{ block.settings.time_unit_color | default: '#1f2937' }};
    padding: 6px 10px;
    border-radius: {{ block.settings.time_unit_radius | default: 6 }}px;
    font-size: {{ block.settings.time_unit_size | default: 14 }}px;
    font-weight: 700;
    min-width: 32px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .time-separator-{{ section.id }} {
    color: {{ block.settings.time_separator_color | default: '#374151' }};
    font-weight: 600;
    font-size: {{ block.settings.time_unit_size | default: 14 }}px;
  }

  .copy-code-btn-{{ section.id }} {
    background-color: {{ block.settings.button_bg | default: '#fbbf24' }};
    color: #1f2937;
    border: none;
    padding: 12px 20px;
    border-radius: {{ block.settings.button_radius | default: 8 }}px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
    white-space: nowrap;
    position: relative;
  }

  .copy-code-btn-{{ section.id }}:hover {
    background-color: {{ block.settings.button_hover_bg | default: '#f59e0b' }};
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
  }

  .copy-code-btn-{{ section.id }}:active {
    transform: translateY(0);
  }

  .copy-icon-{{ section.id }} {
    width: 16px;
    height: 16px;
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .summer-banner-{{ section.id }} {
      flex-direction: column;
      gap: 20px;
      padding: 20px;
      text-align: center;
    }

    .banner-left-{{ section.id }} {
      flex-direction: column;
      gap: 12px;
      width: 100%;
    }

    .banner-right-{{ section.id }} {
      flex-direction: column;
      gap: 16px;
      width: 100%;
    }

    .countdown-container-{{ section.id }} {
      justify-content: center;
    }

    .banner-title-{{ section.id }} {
      font-size: {{ block.settings.title_font_size | default: 18 | minus: 2 }}px;
    }

    .banner-subtitle-{{ section.id }} {
      font-size: {{ block.settings.subtitle_font_size | default: 14 | minus: 1 }}px;
    }
  }

  @media (max-width: 480px) {
    .banner-container-{{ section.id }} {
      padding: 10px;
    }

    .summer-banner-{{ section.id }} {
      padding: 16px;
    }

    .countdown-timer-{{ section.id }} {
      flex-wrap: wrap;
      justify-content: center;
    }

    .time-unit-{{ section.id }} {
      font-size: {{ block.settings.time_unit_size | default: 14 | minus: 2 }}px;
      padding: 4px 8px;
      min-width: 28px;
    }

    .copy-code-btn-{{ section.id }} {
      padding: 10px 16px;
      font-size: 13px;
    }
  }

  /* Animation for countdown */
  {% if block.settings.enable_countdown_animation %}
    .time-unit-{{ section.id }} {
      animation: pulse-{{ section.id }} 2s infinite;
    }

    @keyframes pulse-{{ section.id }} {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }
  {% endif %}

  /* Success animation for copy button */
  .copy-code-btn-{{ section.id }}.copied {
    background-color: {{ block.settings.button_success_bg | default: '#10b981' }};
    color: {{ block.settings.button_success_text | default: 'white' }};
  }

  .copy-code-btn-{{ section.id }}.copied::after {
    content: '‚úì {{ block.settings.copied_text | default: 'Copied!' }}';
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #1f2937;
    color: white;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    animation: fadeInOut-{{ section.id }} 2s ease-in-out;
    z-index: 10;
  }

  @keyframes fadeInOut-{{ section.id }} {
    0%, 100% {
      opacity: 0;
      transform: translateX(-50%) translateY(-5px);
    }
    20%, 80% {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  /* Background decoration */
  {% if block.settings.show_decorations %}
    .summer-banner-{{ section.id }}::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -20%;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(251, 191, 36, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
    }

    .summer-banner-{{ section.id }}::after {
      content: '';
      position: absolute;
      bottom: -30%;
      left: -10%;
      width: 150px;
      height: 150px;
      background: radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
    }
  {% endif %}

  /* Hide section if disabled */
  {% unless block.settings.enable_banner %}
    .banner-container-{{ section.id }} {
      display: none;
    }
  {% endunless %}
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const sectionId{{ section.id | replace: '-', '_' }} = '{{ section.id }}';
    
    // ÂÄíËÆ°Êó∂ÂßãÁªàÊâßË°åÔºåÊó†ÈúÄÂà§Êñ≠
    // Set countdown end time from settings
    const endTime{{ section.id | replace: '-', '_' }} = new Date('{{ block.settings.countdown_end_date | replace: ' ', 'T' }}').getTime();


    // Update countdown every second
    const countdownInterval{{ section.id | replace: '-', '_' }} = setInterval(function() {
      const now = new Date().getTime();
      const timeLeft = endTime{{ section.id | replace: '-', '_' }} - now;
      
      const daysEl = document.getElementById('days-{{ section.id }}');
      const hoursEl = document.getElementById('hours-{{ section.id }}');
      const minutesEl = document.getElementById('minutes-{{ section.id }}');
      const secondsEl = document.getElementById('seconds-{{ section.id }}');
      if (timeLeft > 0 && daysEl && hoursEl && minutesEl && secondsEl) {
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
        
        daysEl.textContent = days.toString().padStart(2, '0');
        hoursEl.textContent = hours.toString().padStart(2, '0');
        minutesEl.textContent = minutes.toString().padStart(2, '0');
        secondsEl.textContent = seconds.toString().padStart(2, '0');
      } else {
        clearInterval(countdownInterval{{ section.id | replace: '-', '_' }});
        const countdownEl = document.getElementById('countdown-{{ section.id }}');
        if (countdownEl) {
          countdownEl.innerHTML = '<span class="time-unit-{{ section.id }}">{{ block.settings.expired_text | default: 'EXPIRED' }}</span>';
        }
      }
    }, 1000);
    
    {% if block.settings.show_copy_button %}
      // Copy code functionality
      const copyCodeBtn{{ section.id | replace: '-', '_' }} = document.getElementById('copyCodeBtn-{{ section.id }}');
      if (copyCodeBtn{{ section.id | replace: '-', '_' }}) {
        copyCodeBtn{{ section.id | replace: '-', '_' }}.addEventListener('click', function() {
          const promoCode = this.dataset.code || '{{ block.settings.promo_code | default: 'SUN15' }}';
          
          // Copy to clipboard
          if (navigator.clipboard) {
            navigator.clipboard.writeText(promoCode).then(function() {
              showCopySuccess{{ section.id | replace: '-', '_' }}();
            }).catch(function(err) {
              console.error('Failed to copy: ', err);
              fallbackCopy{{ section.id | replace: '-', '_' }}(promoCode);
            });
          } else {
            fallbackCopy{{ section.id | replace: '-', '_' }}(promoCode);
          }
          
          // Track copy event
          if (typeof gtag !== 'undefined') {
            gtag('event', 'promo_code_copy', {
              'event_category': 'promotion',
              'event_label': promoCode,
              'section_id': sectionId{{ section.id | replace: '-', '_' }}
            });
          }

        });
      }
      
      function showCopySuccess{{ section.id | replace: '-', '_' }}() {
        const btn = copyCodeBtn{{ section.id | replace: '-', '_' }};
        btn.classList.add('copied');
        btn.innerHTML = '<svg class="copy-icon-{{ section.id }}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>{{ block.settings.copied_text | default: 'Copied!' }}';
        
        // Reset after 2 seconds
        setTimeout(function() {
          btn.classList.remove('copied');
          btn.innerHTML = '<svg class="copy-icon-{{ section.id }}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>{{ block.settings.copy_button_text | default: 'Copy Code' }}';
        }, 2000);
      }
      
      function fallbackCopy{{ section.id | replace: '-', '_' }}(text) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.opacity = '0';
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        showCopySuccess{{ section.id | replace: '-', '_' }}();
      }
    {% endif %}
  });
</script>
